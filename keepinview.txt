 <?php
            if (isset($_SESSION["UID"])) {
                /*
                else {
                    echo "
                        <tr><td>Mentor</td><td style='color: #7f7f7f'><i>not filled yet</i></td></tr>
                    ";
                }
                */

                // ACTIVITIES table
                echo "
                    <div class='col-right'>
                        <table id='tblactivities' width='100%'>
                            <caption><h3>ACTIVITIES</h3></caption>
                            <tr>
                                <th>No.</th>
                                <th>Session</th>
                                <th>Name</th>
                                <th>Level</th>
                                <th>Remarks</th>
                            </tr>
                ";

                $fetchActivitiesQuery = "SELECT * FROM activity WHERE student_id='".$matric."'";
                $activitiesResult = mysqli_query($conn, $fetchActivitiesQuery);
                if (mysqli_num_rows($activitiesResult) > 0) {
                    // output the data of each row
                    $row_index = 1;
                    
                    while($row = mysqli_fetch_assoc($activitiesResult)) {
                        echo "
                            <tr>
                                <td>".$row_index."</td>
                                <td>Sem ".$row["activity_sem"].", ".$row["activity_year"]."</td>
                                <td>".$row["activity_name"]."</td>
                                <td>LEVEL, UPDATE PHP LATER</td>
                                <td>".$row["activity_remarks"]."</td>
                            </tr>
                        ";
                        $row_index++;
                    }
                    echo "</table>";
                }
                else {
                    // if the query returns no rows
                    echo "
                        <tr>
                            <td colspan='5'>No activites have been added yet.</td>
                        </tr>
                        </table>
                    ";
                }

                // COMPETITIONS table
                echo "
                    <table id='tblcompetitions' width='100%'>
                        <caption><h3>COMPETITIONS</h3></caption>
                        <tr>
                            <th>No.</th>
                            <th>Session</th>
                            <th>Name</th>
                            <th>Level</th>
                            <th>Remarks</th>
                        </tr>
                ";

                $fetchCompetitionsQuery = "SELECT * FROM competition WHERE student_id='".$matric."'";
                $competitionsResult = mysqli_query($conn, $fetchCompetitionsQuery);
                if (mysqli_num_rows($competitionsResult) > 0) {
                    // output the data of each row
                    $row_index = 1;

                    while ($row = mysqli_fetch_assoc($activitiesResult)) {
                        echo "
                            <tr>
                                <td>".$row_index."</td>
                                <td>Sem ".$row["comp_sem"].", ".$row["comp_year"]."</td>
                                <td>".$row["comp_name"]."</td>
                                <td>LEVEL, UPDATE PHP LATER</td>
                                <td>".$row["comp_remarks"]."</td>
                            </tr>
                        ";
                        echo "</table>";
                        $row_index++;
                    }
                    echo "</table>";
                }
                else {
                    // if the query returns no rows
                    echo "
                        <tr>
                            <td colspan='5'>No competitions have been added yet.</td>
                        </tr>
                        </table>
                    ";
                }

                // CERTIFICATIONS table

                echo "
                    <table id='tblcertifications' width='100%'>
                        <caption><h3>CERTIFICATIONS</h3></caption>
                        <tr>
                            <th>No.</th>
                            <th>Name</th>
                            <th>Issuer</th>
                            <th>Description</th>
                            <th>Award Date</th>
                        </tr>
                ";

                $fetchCertificationsQuery = "SELECT * FROM certification WHERE student_id='".$matric."'";
                $certificationsResult = mysqli_query($conn, $fetchCertificationsQuery);
                if (mysqli_num_rows($certificationsResult) > 0) {
                    // output the data of each row
                    $row_index = 1;

                    while ($row = mysqli_fetch_assoc($certificationsResult)) {
                        echo "
                            <tr>
                                <td>".$row_index."</td>
                                <td>".$row["cert_name"]."</td>
                                <td>".$row["cert_issuer"]."</td>
                                <td>".$row["cert_description"]."</td>
                                <td>".$row["cert_awarddate"]."</td>
                            </tr>
                        ";
                        $row_index++;
                    }
                    echo "</table>";
                }
                else {
                    // if the query returns no rows
                    echo "
                        <tr>
                            <td colspan='5'>No certifications have been added yet.</td>
                        </tr>
                        </table>
                    ";
                }
                // COL-RIGHT ENDS HERE
            }
            else {
                echo "ERROR: ".mysqli_error($conn);
            }
        ?>