 <?php
            if (isset($_SESSION["UID"])) {
                /*
                else {
                    echo "
                        <tr><td>Mentor</td><td style='color: #7f7f7f'><i>not filled yet</i></td></tr>
                    ";
                }
                */

                // ACTIVITIES table
                echo "
                    <div class='col-right'>
                        <table id='tblactivities' width='100%'>
                            <caption><h3>ACTIVITIES</h3></caption>
                            <tr>
                                <th>No.</th>
                                <th>Session</th>
                                <th>Name</th>
                                <th>Level</th>
                                <th>Remarks</th>
                            </tr>
                ";

                $fetchActivitiesQuery = "SELECT * FROM activity WHERE student_id='".$matric."'";
                $activitiesResult = mysqli_query($conn, $fetchActivitiesQuery);
                if (mysqli_num_rows($activitiesResult) > 0) {
                    // output the data of each row
                    $row_index = 1;
                    
                    while($row = mysqli_fetch_assoc($activitiesResult)) {
                        echo "
                            <tr>
                                <td>".$row_index."</td>
                                <td>Sem ".$row["activity_sem"].", ".$row["activity_year"]."</td>
                                <td>".$row["activity_name"]."</td>
                                <td>LEVEL, UPDATE PHP LATER</td>
                                <td>".$row["activity_remarks"]."</td>
                            </tr>
                        ";
                        $row_index++;
                    }
                    echo "</table>";
                }
                else {
                    // if the query returns no rows
                    echo "
                        <tr>
                            <td colspan='5'>No activites have been added yet.</td>
                        </tr>
                        </table>
                    ";
                }

                // COMPETITIONS table
                echo "
                    <table id='tblcompetitions' width='100%'>
                        <caption><h3>COMPETITIONS</h3></caption>
                        <tr>
                            <th>No.</th>
                            <th>Session</th>
                            <th>Name</th>
                            <th>Level</th>
                            <th>Remarks</th>
                        </tr>
                ";

                $fetchCompetitionsQuery = "SELECT * FROM competition WHERE student_id='".$matric."'";
                $competitionsResult = mysqli_query($conn, $fetchCompetitionsQuery);
                if (mysqli_num_rows($competitionsResult) > 0) {
                    // output the data of each row
                    $row_index = 1;

                    while ($row = mysqli_fetch_assoc($activitiesResult)) {
                        echo "
                            <tr>
                                <td>".$row_index."</td>
                                <td>Sem ".$row["comp_sem"].", ".$row["comp_year"]."</td>
                                <td>".$row["comp_name"]."</td>
                                <td>LEVEL, UPDATE PHP LATER</td>
                                <td>".$row["comp_remarks"]."</td>
                            </tr>
                        ";
                        echo "</table>";
                        $row_index++;
                    }
                    echo "</table>";
                }
                else {
                    // if the query returns no rows
                    echo "
                        <tr>
                            <td colspan='5'>No competitions have been added yet.</td>
                        </tr>
                        </table>
                    ";
                }

                // CERTIFICATIONS table

                echo "
                    <table id='tblcertifications' width='100%'>
                        <caption><h3>CERTIFICATIONS</h3></caption>
                        <tr>
                            <th>No.</th>
                            <th>Name</th>
                            <th>Issuer</th>
                            <th>Description</th>
                            <th>Award Date</th>
                        </tr>
                ";

                $fetchCertificationsQuery = "SELECT * FROM certification WHERE student_id='".$matric."'";
                $certificationsResult = mysqli_query($conn, $fetchCertificationsQuery);
                if (mysqli_num_rows($certificationsResult) > 0) {
                    // output the data of each row
                    $row_index = 1;

                    while ($row = mysqli_fetch_assoc($certificationsResult)) {
                        echo "
                            <tr>
                                <td>".$row_index."</td>
                                <td>".$row["cert_name"]."</td>
                                <td>".$row["cert_issuer"]."</td>
                                <td>".$row["cert_description"]."</td>
                                <td>".$row["cert_awarddate"]."</td>
                            </tr>
                        ";
                        $row_index++;
                    }
                    echo "</table>";
                }
                else {
                    // if the query returns no rows
                    echo "
                        <tr>
                            <td colspan='5'>No certifications have been added yet.</td>
                        </tr>
                        </table>
                    ";
                }
                // COL-RIGHT ENDS HERE
            }
            else {
                echo "ERROR: ".mysqli_error($conn);
            }
        ?>

                <div id="Activities" class="tabcontent">
                <br>
                <div id="activitiesTable-container">
                    <table id="activitiesTable">
                        <?php
                            $fetchActivitiesQuery = "SELECT * FROM activity WHERE accountID='".$accountID."' AND activityType='1'";
                            $activitiesResult = mysqli_query($conn, $fetchActivitiesQuery);
                            if (mysqli_num_rows($activitiesResult) > 0) {
                                echo "
                                    <tr>
                                        <th>No.</th>
                                        <th>Session</th>
                                        <th>Level</th>
                                        <th>Details</th>
                                        <th>Remarks</th>
                                        <th>Image</th>
                                        <th>&nbsp;</th>
                                    </tr>
                                ";

                                $rowIndex = 1;

                                while ($row = mysqli_fetch_assoc($activitiesResult)) {
                                    $editID = $removeID = $imageID = $row["activityID"];

                                    // this block is to determine the output for activityLevel
                                    $levelOutput = '';
                                    switch($row["activityLevel"]) {
                                        case "1": $levelOutput = "Faculty"; break;
                                        case "2": $levelOutput = "University"; break;
                                        case "3": $levelOutput = "National"; break;
                                        case "4": $levelOutput = "International"; break;
                                        default: $levelOutput = "";
                                    }

                                    echo "
                                        <tr>
                                            <td>".$rowIndex."</td>
                                            <td>Sem ".$row["activitySem"]." Year ".$row["activityYear"]."</td>
                                            <td>".$levelOutput."</td>
                                            <td>".$row["activityDetails"]."</td>
                                            <td>".$row["activityRemarks"]."</td>
                                    ";

                                    if ($row["activityImagePath"] != '') {
                                        echo "
                                            <td style='text-align: center'>
                                                <a id='image' title='Open image' href='show_activity_image.php?id=".$imageID."' target='blank'><i class='fa fa-image'></i></a>
                                            </td>
                                        ";
                                    }
                                    else {
                                        echo "<td>&nbsp;</td>";
                                    }

                                    echo "
                                        <td style='text-align: center'>
                                            <a id='edit' title='Edit' href='activitieslist_edit.php?id=".$editID."'><i class='fa fa-pencil-square-o'></i></a>
                                            <a id='remove' title='Remove' onclick='confirmRemoval($removeID)'><i class='fa fa-trash-o'></i></a>
                                        </td>
                                    ";
                                }
                            }
                            else {  // if the query returns no rows
                                echo "
                                    <tr>
                                        <th>No.</th>
                                        <th>Session</th>
                                        <th>Level</th>
                                        <th>Details</th>
                                        <th>Remarks</th>
                                        <th>Image</th>
                                    </tr>
                                    <tr>
                                        <td colspan='6'>No activities have been added yet.</td>
                                    </tr>
                                ";
                            }
                        ?>
                    </table>
                </div>
                <br>
            </div>